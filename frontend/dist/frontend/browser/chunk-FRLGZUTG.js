import{a as Y,b as _,d as X,e as A}from"./chunk-EL426IR4.js";import{Ca as u,Da as b,Ea as q,F as M,Fa as F,Ga as x,Ha as w,Ia as P,J as E,Ja as r,Ka as a,Kb as K,La as s,M as W,R as N,Ra as $,S as j,Ua as C,Wa as p,Yb as R,Zb as L,_b as Q,cb as h,db as k,eb as d,f as O,fb as f,gb as z,i as J,ia as i,j as l,k as I,mb as S,na as g,ob as y,pb as G,qa as T,tb as B,ub as V,w as m}from"./chunk-3KMOHGR5.js";var D=class o{constructor(n){this.apiService=n;console.log("[UserService] Inicializado"),this.loadInitialUser()}getUsers(){throw new Error("Method not implemented.")}updateUserStatus(n,e){throw new Error("Method not implemented.")}currentUserSubject=new O(null);currentUser$=this.currentUserSubject.asObservable();loadInitialUser(){console.log("[UserService] Cargando usuario inicial");let n=this.getCurrentUserId();n&&this.getUserById(n).subscribe({next:e=>this.currentUserSubject.next(e),error:()=>this.clearUserData()})}getCurrentUserId(){let n=localStorage.getItem("token");if(!n)return null;try{return Y(n).id}catch(e){return console.error("[UserService] Error decodificando token:",e),null}}createUser(n){return console.log("[UserService] Creando usuario:",n),this.apiService.postOb(_.USERS.BASE,n).pipe(M(e=>console.log("[UserService] Usuario creado:",e)),m(e=>(console.error("[UserService] Error creando usuario:",e),l(()=>new Error("No se pudo crear el usuario")))))}getAllUsers(){return console.log("[UserService] Obteniendo todos los usuarios"),this.apiService.getOb(_.USERS.BASE).pipe(M(n=>console.log(`[UserService] Obtenidos ${n.length} usuarios`)),m(n=>(console.error("[UserService] Error obteniendo usuarios:",n),l(()=>new Error("No se pudieron obtener los usuarios")))))}getUserById(n){return console.log(`[UserService] Obteniendo usuario con ID: ${n}`),this.apiService.getOb(_.USERS.BY_ID(n)).pipe(I(e=>{if(e.success&&e.data)return e.data;throw new Error("Formato de respuesta inv\xE1lido")}),M(e=>console.log("[UserService] Usuario obtenido:",e)),m(e=>(console.error(`[UserService] Error obteniendo usuario ${n}:`,e),l(()=>new Error("No se pudo obtener el usuario")))))}updateUser(n,e){return console.log(`[UserService] Actualizando usuario ${n} con:`,e),this.apiService.putOb(_.USERS.BY_ID(n),e).pipe(M(t=>console.log("[UserService] Respuesta cruda:",t)),I(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return console.warn("No se pudo parsear la respuesta:",t),t}return t}),m(t=>{if(console.error("[UserService] Error al actualizar:",t),t.error&&typeof t.error.text=="string")try{let c=JSON.parse(t.error.text);return J(c)}catch(c){console.warn("Error parseando error response:",c)}return l(()=>t)}))}deleteUser(n){return console.log(`[UserService] Eliminando usuario con ID: ${n}`),this.apiService.deleteOb(_.USERS.BY_ID(n)).pipe(M(()=>{console.log(`[UserService] Usuario ${n} eliminado`),n===this.getCurrentUserId()&&this.clearUserData()}),m(e=>(console.error(`[UserService] Error eliminando usuario ${n}:`,e),l(()=>new Error("No se pudo eliminar el usuario")))))}getProfile(){let n=this.getCurrentUserId();return n?this.apiService.getOb(_.USERS.BY_ID(n)).pipe(I(e=>e._id?e:e.data||e),m(e=>(console.error("Error obteniendo perfil:",e),l(()=>e)))):l(()=>new Error("Usuario no autenticado"))}changePassword(n,e){return this.getCurrentUserId()?this.apiService.postOb(`${_.USERS.BASE}/change-password`,{oldPassword:n,newPassword:e}).pipe(m(c=>(console.error("[UserService] Error cambiando contrase\xF1a:",c),l(()=>c)))):l(()=>new Error("Usuario no autenticado"))}checkCurrentUserRole(n){let e=localStorage.getItem("token");if(!e)return!1;try{return Y(e).role===n}catch(t){return console.error("[UserService] Error decodificando token:",t),!1}}hasRole(n){return this.checkCurrentUserRole(n)}clearUserData(){console.log("[UserService] Limpiando datos de usuario"),this.currentUserSubject.next(null)}refreshUserData(){console.log("[UserService] Refrescando datos de usuario");let n=this.getCurrentUserId();n&&this.getUserById(n).subscribe({next:e=>this.currentUserSubject.next(e),error:()=>this.clearUserData()})}static \u0275fac=function(e){return new(e||o)(W(X))};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var v=class o{sidebarCollapsed=new O(!1);activeModule=new O("dashboard");mobileView=new O(!1);sidebarCollapsed$=this.sidebarCollapsed.asObservable();activeModule$=this.activeModule.asObservable();mobileView$=this.mobileView.asObservable();constructor(){this.checkViewport(),window.addEventListener("resize",()=>this.checkViewport())}toggleSidebar(){this.sidebarCollapsed.next(!this.sidebarCollapsed.value)}setActiveModule(n){this.activeModule.next(n),this.mobileView.value&&this.sidebarCollapsed.next(!0)}checkViewport(){this.mobileView.next(window.innerWidth<992),window.innerWidth<992&&this.sidebarCollapsed.next(!0)}getModulesForRole(n){return{admin:[{name:"Dashboard",icon:"tachometer-alt",path:"principal"},{name:"Eventos",icon:"calendar",path:"events-page"},{name:"Personal",icon:"users-cog",path:"/pages/personal",children:[{name:"Dashboard",icon:"tachometer-alt",path:"/pages/personal"},{name:"Tipos de Personal",icon:"tags",path:"/staff/personnel-types"},{name:"Listado de Personal",icon:"id-badge",path:"/staff/personnel"}]},{name:"Proveedor",icon:"users-cog",path:"home-providers"},{name:"Recursos",icon:"box-open",path:"inventory-page"},{name:"Contratos",icon:"file-contract",path:"contracts-page"},{name:"Usuarios",icon:"users",path:"/pages/users",children:[{name:"Dashboard",icon:"tachometer-alt",path:"/pages/usuarios"},{name:"Lista de Usuarios",icon:"list",path:"/users/list"}]}],coordinador:[{name:"Dashboard",icon:"tachometer-alt",path:"/pages/principal"},{name:"Eventos",icon:"calendar",path:"events-page"},{name:"Personal",icon:"users-cog",path:"/pages/personal",children:[{name:"Dashboard",icon:"tachometer-alt",path:"/pages/personal"},{name:"Listado de Personal",icon:"id-badge",path:"/staff/personnel"}]},{name:"Recursos",icon:"box-open",path:"inventory-page"},{name:"Contratos",icon:"file-contract",path:"contracts-page"}],lider:[{name:"Eventos",icon:"calendar",path:"events-page"},{name:"Personal",icon:"users-cog",path:"/pages/personal",children:[{name:"Dashboard",icon:"tachometer-alt",path:"/pages/personal"},{name:"Listado de Personal",icon:"id-badge",path:"/staff/personnel"}]},{name:"Asistencia",icon:"clipboard-list",path:"pages/attendance"},{name:"Recursos",icon:"box-open",path:"/inventory-page"}]}[n]||[]}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var ae=()=>["/users/profile"],ce=()=>["/auth/register"];function se(o,n){o&1&&(r(0,"button",7),s(1,"i",27),d(2," Registrar Usuario "),a()),o&2&&P("routerLink",y(1,ce))}function de(o,n){if(o&1&&(r(0,"span",11),d(1),a()),o&2){let e=p();i(),z(" ",e.notifications.length," ")}}function le(o,n){if(o&1&&(r(0,"div",13)(1,"div",2),s(2,"i"),r(3,"div")(4,"p",28),d(5),a(),r(6,"small",29),d(7),a()()()()),o&2){let e=n.$implicit;i(2),k(S("fas fa-",e.icon," me-2")),i(3),f(e.message),i(2),f(e.time)}}var ee=class o{constructor(n,e,t,c){this.authService=n;this.userService=e;this.layoutService=t;this.router=c}currentUser=null;decodedToken=null;isMenuOpen=!1;notifications=[{icon:"calendar-check",message:"Evento confirmado",time:"10 min"},{icon:"exclamation-circle",message:"Alerta de recurso",time:"1 h"}];ngOnInit(){this.loadUserData()}loadUserData(){this.decodedToken=this.authService.decodeToken(),console.log("[Navbar] Token decodificado:",this.decodedToken),this.decodedToken?.id?this.userService.getUserById(this.decodedToken.id).subscribe({next:n=>{console.log("[Navbar] Usuario obtenido:",n),this.currentUser=n},error:n=>{console.error("[Navbar] Error cargando usuario:",n),this.currentUser=null}}):console.warn("[Navbar] No se encontr\xF3 ID en token")}get displayName(){return this.currentUser?.fullname||this.currentUser?.username||this.decodedToken?.username||this.decodedToken?.email?.split("@")[0]||"Usuario"}get userRole(){return this.decodedToken?.role||"Invitado"}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}logout(){this.authService.logout(),this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||o)(g(A),g(D),g(v),g(R))};static \u0275cmp=T({type:o,selectors:[["app-navbar"]],standalone:!1,decls:48,vars:15,consts:[[1,"navbar","navbar-expand","navbar-light"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","btn-link","me-2","sidebar-toggle",3,"click"],[1,"fas","fa-bars"],[1,"welcome-message","me-2"],[1,"badge","bg-primary"],[1,"btn","btn-outline-primary","me-3",3,"routerLink"],[1,"dropdown","me-3"],["data-bs-toggle","dropdown",1,"btn","btn-link","position-relative"],[1,"fas","fa-bell"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item"],[1,"dropdown","user-menu"],["aria-expanded","false",1,"btn","btn-user","dropdown-toggle",3,"click"],[1,"fas","fa-user-circle","me-1"],[1,"d-none","d-md-inline"],[1,"dropdown-header"],[1,"d-block","text-muted"],[1,"dropdown-divider"],[1,"dropdown-item",3,"routerLink"],[1,"fas","fa-user","me-2"],["routerLink","/configuracion",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"fas","fa-user-plus","me-1"],[1,"mb-0"],[1,"text-muted"]],template:function(e,t){e&1&&(r(0,"nav",0)(1,"div",1)(2,"div",2)(3,"button",3),C("click",function(){return t.layoutService.toggleSidebar()}),s(4,"i",4),a(),r(5,"span",5),d(6),a(),r(7,"span",6),d(8),B(9,"titlecase"),a()(),r(10,"div",2),u(11,se,3,2,"button",7),r(12,"div",8)(13,"button",9),s(14,"i",10),u(15,de,2,1,"span",11),a(),r(16,"div",12),x(17,le,8,5,"div",13,q),a()(),r(19,"div",14)(20,"button",15),C("click",function(){return t.toggleMenu()}),s(21,"i",16),r(22,"span",17),d(23),a()(),r(24,"ul",12)(25,"li")(26,"div",18)(27,"strong"),d(28),a(),r(29,"small",19),d(30),B(31,"titlecase"),a()()(),r(32,"li"),s(33,"hr",20),a(),r(34,"li")(35,"a",21),s(36,"i",22),d(37," Mi Perfil "),a()(),r(38,"li")(39,"a",23),s(40,"i",24),d(41," Configuraci\xF3n "),a()(),r(42,"li"),s(43,"hr",20),a(),r(44,"li")(45,"a",25),C("click",function(){return t.logout()}),s(46,"i",26),d(47," Cerrar Sesi\xF3n "),a()()()()()()()),e&2&&(i(6),z("Bienvenido, ",t.displayName),i(2),f(V(9,10,t.userRole)),i(3),b(t.authService.hasRole("admin")?11:-1),i(4),b(t.notifications.length>0?15:-1),i(2),w(t.notifications),i(6),f(t.displayName),i(),h("show",t.isMenuOpen),i(4),f(t.displayName),i(2),f(V(31,12,t.userRole)),i(5),P("routerLink",y(14,ae)))},dependencies:[L,K],styles:['@keyframes _ngcontent-%COMP%_particle-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse-glow{0%,to{opacity:1}50%{opacity:.7;box-shadow:0 0 15px currentColor}}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#1a1a2e;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;background-image:radial-gradient(circle at 10% 20%,rgba(106,17,203,.1) 0%,transparent 20%),radial-gradient(circle at 90% 80%,rgba(37,117,252,.1) 0%,transparent 20%)}.pulse-effect[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-glow 2s infinite alternate}.card[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:20px;box-shadow:0 8px 32px #0000004d;position:relative;overflow:hidden}.card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);transform:rotate(0);animation:_ngcontent-%COMP%_particle-rotate 15s linear infinite;pointer-events:none;z-index:0}.input-field[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#ffffffb3;transition:all .3s ease}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 15px 15px 45px;background:#ffffff1a;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#fff;font-size:1rem;transition:all .3s ease}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6a11cb;background:#ffffff26;box-shadow:0 0 0 2px #6a11cb4d}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + i[_ngcontent-%COMP%]{color:#6a11cb}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:15px 25px;border-radius:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;font-size:.9rem;border:none;cursor:pointer;transform:translateY(0);transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0003}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5e0fb3,#0c65fc)}.btn-text[_ngcontent-%COMP%]{background:transparent;color:#ffffffb3;padding:10px}.btn-text[_ngcontent-%COMP%]:hover{color:#f46b45}.alert[_ngcontent-%COMP%]{padding:15px;border-radius:10px;margin-bottom:20px;display:flex;align-items:center;gap:10px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.alert-success[_ngcontent-%COMP%]{background:#38ef7d1a;border-left:4px solid #38ef7d;color:#38ef7d}.alert-danger[_ngcontent-%COMP%]{background:#ff416c1a;border-left:4px solid #ff416c;color:#ff416c}.alert-warning[_ngcontent-%COMP%]{background:#f9d4231a;border-left:4px solid #f9d423;color:#f9d423}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.sidebar[_ngcontent-%COMP%]{position:fixed;width:280px;height:calc(100vh - 120px);left:0;top:60px;background:#141428f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.05);z-index:100;transition:all .3s ease;overflow-y:auto}@media (max-width: 992px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0);box-shadow:5px 0 15px #0000004d}}.sidebar[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding:0}.sidebar[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{color:#ffffffe6;font-weight:500}.sidebar[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#ffffffb3;padding:.5rem;border-radius:8px;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#6a11cb;background:#ffffff0d}.sidebar[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{border-color:#6a11cb80;color:#ffffffe6;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background:#6a11cb33;border-color:#6a11cb}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{position:relative;color:#ffffffb3}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#6a11cb}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#1a1a2ef2;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:10px;box-shadow:0 10px 30px #0003;padding:.5rem 0;margin-top:.5rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{color:#ffffffe6;padding:.5rem 1.5rem}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#fff9;font-size:.75rem;margin-top:.25rem}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#fffc;padding:.5rem 1.5rem;display:flex;align-items:center;transition:all .2s ease}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#6a11cb1a;color:#fff}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;margin-right:.75rem;color:#fff9}.sidebar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{border-color:#ffffff0d;margin:.5rem 0}.sidebar[_ngcontent-%COMP%]   .badge.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc)!important}.sidebar[_ngcontent-%COMP%]   .badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f46b45,#df3b0d)!important}.badge[_ngcontent-%COMP%]{font-size:.6rem;padding:.25rem .4rem;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#1a1a2efa!important;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:10px;box-shadow:0 10px 30px #0000004d;padding:.5rem 0;margin-top:.5rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{padding:.5rem 1.5rem;color:#fff}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#fff9!important}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#fffc;padding:.5rem 1.5rem;transition:all .2s ease}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#6a11cb1a;color:#fff}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff9}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.text-danger[_ngcontent-%COMP%]{color:#ff416ccc!important}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#ff416c1a!important;color:#ff416c!important}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.text-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff416ccc!important}.user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{border-color:#ffffff0d}.user-menu[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%]{background:#ffffff14;color:#fff;border:none;border-radius:50px;padding:.5rem 1rem;transition:all .3s ease}.user-menu[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%]:hover{background:#ffffff26}.user-menu[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6a11cb}']})};var pe=o=>["/pages",o],fe=()=>({exact:!0});function ge(o,n){if(o&1&&(r(0,"span"),d(1),a()),o&2){let e=p().$implicit;i(),f(e.name)}}function me(o,n){if(o&1&&s(0,"i",9),o&2){let e=p().$implicit,t=p();h("rotated",t.isExpanded(e))}}function ue(o,n){if(o&1){let e=$();r(0,"a",11),C("click",function(){let c=N(e).$implicit,U=p(3);return j(U.setActiveModule(c.name))}),s(1,"i"),r(2,"span"),d(3),a()()}if(o&2){let e=n.$implicit;P("routerLink",e.path),i(),k(S("fas fa-",e.icon," me-3")),i(2),f(e.name)}}function be(o,n){if(o&1&&(r(0,"div",8),x(1,ue,4,5,"a",10,F),a()),o&2){let e=p().$implicit;i(),w(e.children)}}function _e(o,n){if(o&1){let e=$();r(0,"div",5)(1,"a",6),C("click",function(){let c=N(e).$implicit,U=p();return j(c.children?U.toggleSubMenu(c):U.setActiveModule(c.name))}),s(2,"i"),u(3,ge,2,1,"span"),u(4,me,1,2,"i",7),a(),u(5,be,3,0,"div",8),a()}if(o&2){let e=n.$implicit,t=p();h("has-children",e.children),i(),P("routerLink",e.children?null:G(10,pe,e.path))("routerLinkActiveOptions",y(12,fe)),i(),k(S("fas fa-",e.icon," me-3")),i(),b(t.collapsed?-1:3),i(),b(e.children&&!t.collapsed?4:-1),i(),b(e.children&&t.isExpanded(e)&&!t.collapsed?5:-1)}}function Ce(o,n){o&1&&(r(0,"div",4)(1,"div",12),s(2,"div",13),r(3,"span"),d(4,"Sistema Operativo"),a()()())}var ne=class o{constructor(n,e,t){this.layoutService=n;this.authService=e;this.router=t;this.layoutService.sidebarCollapsed$.subscribe(c=>{this.collapsed=c})}modules=[];collapsed=!1;expandedMenus={};ngOnInit(){let e=this.authService.decodeToken()?.role;e?(this.modules=this.layoutService.getModulesForRole(e),this.modules.forEach(t=>{t.children&&(this.expandedMenus[t.name]=!1)})):this.router.navigate(["/auth/login"])}isExpanded(n){return this.expandedMenus[n.name]}toggleSubMenu(n){this.expandedMenus[n.name]=!this.expandedMenus[n.name]}setActiveModule(n){this.layoutService.setActiveModule(n)}static \u0275fac=function(e){return new(e||o)(g(v),g(A),g(R))};static \u0275cmp=T({type:o,selectors:[["app-sidebar"]],standalone:!1,decls:6,vars:3,consts:[[1,"sidebar"],[1,"sidebar-header","d-flex","align-items-center","justify-content-between","p-3"],[1,"sidebar-menu"],[1,"menu-parent",3,"has-children"],[1,"sidebar-footer","p-3"],[1,"menu-parent"],["routerLinkActive","active",1,"menu-item","d-flex","align-items-center","p-3",3,"click","routerLink","routerLinkActiveOptions"],[1,"fas","fa-angle-down","ms-auto",3,"rotated"],[1,"submenu"],[1,"fas","fa-angle-down","ms-auto"],["routerLinkActive","active",1,"menu-item","d-flex","align-items-center","p-3","ps-5",3,"routerLink"],["routerLinkActive","active",1,"menu-item","d-flex","align-items-center","p-3","ps-5",3,"click","routerLink"],[1,"system-status","d-flex","align-items-center"],[1,"status-indicator","online","me-2"]],template:function(e,t){e&1&&(r(0,"div",0),s(1,"div",1),r(2,"div",2),x(3,_e,6,13,"div",3,F),a(),u(5,Ce,5,0,"div",4),a()),e&2&&(h("collapsed",t.collapsed),i(3),w(t.modules),i(2),b(t.collapsed?-1:5))},dependencies:[L,Q],styles:['@keyframes _ngcontent-%COMP%_particle-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse-glow{0%,to{opacity:1}50%{opacity:.7;box-shadow:0 0 15px currentColor}}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#1a1a2e;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;background-image:radial-gradient(circle at 10% 20%,rgba(106,17,203,.1) 0%,transparent 20%),radial-gradient(circle at 90% 80%,rgba(37,117,252,.1) 0%,transparent 20%)}.pulse-effect[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-glow 2s infinite alternate}.card[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:20px;box-shadow:0 8px 32px #0000004d;position:relative;overflow:hidden}.card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);transform:rotate(0);animation:_ngcontent-%COMP%_particle-rotate 15s linear infinite;pointer-events:none;z-index:0}.input-field[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#ffffffb3;transition:all .3s ease}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 15px 15px 45px;background:#ffffff1a;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#fff;font-size:1rem;transition:all .3s ease}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6a11cb;background:#ffffff26;box-shadow:0 0 0 2px #6a11cb4d}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + i[_ngcontent-%COMP%]{color:#6a11cb}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:15px 25px;border-radius:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;font-size:.9rem;border:none;cursor:pointer;transform:translateY(0);transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0003}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5e0fb3,#0c65fc)}.btn-text[_ngcontent-%COMP%]{background:transparent;color:#ffffffb3;padding:10px}.btn-text[_ngcontent-%COMP%]:hover{color:#f46b45}.alert[_ngcontent-%COMP%]{padding:15px;border-radius:10px;margin-bottom:20px;display:flex;align-items:center;gap:10px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.alert-success[_ngcontent-%COMP%]{background:#38ef7d1a;border-left:4px solid #38ef7d;color:#38ef7d}.alert-danger[_ngcontent-%COMP%]{background:#ff416c1a;border-left:4px solid #ff416c;color:#ff416c}.alert-warning[_ngcontent-%COMP%]{background:#f9d4231a;border-left:4px solid #f9d423;color:#f9d423}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.sidebar[_ngcontent-%COMP%]{width:280px;height:100%;position:fixed;left:0;top:60px;bottom:60px;background:#141428e6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.05);z-index:100;transition:width .3s ease;overflow-y:auto}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{justify-content:center;padding:1rem!important}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid rgba(255,255,255,.05);display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#fff;flex:1}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{color:#ffffffb3;background:none;border:none;font-size:1.1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{color:#6a11cb;transform:rotate(90deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem 0}.sidebar[_ngcontent-%COMP%]   .menu-parent[_ngcontent-%COMP%]{position:relative}.sidebar[_ngcontent-%COMP%]   .menu-parent.has-children[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background:#ffffff0d}.sidebar[_ngcontent-%COMP%]   .menu-parent[_ngcontent-%COMP%]:last-child:after{display:none}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{color:#ffffffb3;text-decoration:none;display:flex;align-items:center;padding:.85rem 1.5rem;transition:all .3s ease;position:relative;border-left:3px solid transparent}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#6a11cb}.sidebar[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:#fff;background:#6a11cb1a;border-left-color:#6a11cb}.sidebar[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6a11cb}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .fa-angle-down[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{overflow:hidden;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding-left:3rem;font-size:.9rem;background:#0000001a}.sidebar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#ffffff08}.sidebar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{background:#6a11cb14}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.05);padding:1rem 1.5rem;font-size:.8rem;color:#ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .system-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;margin-right:.5rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .system-status[_ngcontent-%COMP%]   .status-indicator.online[_ngcontent-%COMP%]{background:#38ef7d;box-shadow:0 0 10px #38ef7d80}@media (max-width: 992px){.sidebar[_ngcontent-%COMP%]{width:70px;transform:translate(-100%);transition:transform .3s ease}.sidebar.expanded[_ngcontent-%COMP%]{transform:translate(0)}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{justify-content:center;padding:1rem!important}}@media (min-width: 993px){.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{justify-content:center;padding:1rem!important}}']})};export{D as a,v as b,ee as c,ne as d};
